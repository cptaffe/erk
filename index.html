<!DOCTYPE html>
<html>
	<head>
		<style>
			@import url(https://fonts.googleapis.com/css?family=Open+Sans);
			#test {
				font-size: 10pt;
				font-family: "Open Sans", sans-serif;
			}
		</style>
	</head>
	<body>
		<div id="test">...</div>
		<script>
			var React = require('react'),
				$ = require('jquery'),
				irc = require('irc')

			var Message = React.createClass({displayName: "Message",
				render: function() {
					return React.createElement("div", null, this.props.from + ' => ' + this.props.to + ': ' + this.props.message)
				}
			})

			var Join = React.createClass({displayName: "Join",
				render: function() {
					return React.createElement("div", null, this.props.who, ' has joined ', this.props.channel)
				}
			})

			var Part = React.createClass({displayName: "Part",
				render: function() {
					return React.createElement("div", null, this.props.who+' was kicked from '+this.props.channel+' by '+this.props.by+': '+this.props.reason)
				}
			})

			var Pm = React.createClass({displayName: "Pm",
				render: function() {
					return React.createElement("div", null, 'Got private message from '+this.props.nick+': '+this.props.message)
				}
			})

			var client = new irc.Client('irc.mozilla.org', 'erktest', {
				channels: ['#firefox']
			});

			// error handler
			client.addListener('error', function(message) {
				console.log('error: ', message);
			});

			// message handler
			client.addListener('message', function (from, to, message) {
				React.render(React.createElement(Message, {from: from, to: to, message: message}), $('#test')[0])
			});

			// log other things
			client.addListener('pm', function(nick, message) {
				console.log('Got private message from '+nick+': '+message);
			});
			client.addListener('join', function(channel, who) {
				React.render(React.createElement(Join, {who: who, channel: channel}), $('#test')[0])
			});
			client.addListener('part', function(channel, who, reason) {
				React.render(React.createElement(Part, {who: who, channel: channel}), $('#test')[0])
			});
			client.addListener('kick', function(channel, who, by, reason) {
				React.render(React.createElement(Kick, {who: who, channel: channel, by: by, reason: reason}), $('#test')[0])
			});
		</script>
	</body>
</html>
